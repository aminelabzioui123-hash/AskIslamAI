<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#0a5f4f">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© - Ø§Ø³Ø£Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… AI</title>
    <!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ¤– ØªØ·Ø¨ÙŠÙ‚ Ø§Ø³Ø£Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… AI - Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù‘Ù†Ø©
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    âœ… Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø©:
    
    1. Ù†Ø¸Ø§Ù… Ø¨Ø­Ø« Ø°ÙƒÙŠ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ù€ Cloudflare AI
    2. Ø±Ø¯ÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…Ø­Ø³Ù‘Ù†Ø© ØªØºØ·ÙŠ Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø¥Ø³Ù„Ø§Ù…ÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø©
    3. Ø¢Ù„ÙŠØ© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«
    4. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£ÙØ¶Ù„ Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
    
    âš™ï¸ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):
    
    1. Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Account ID Ùˆ API Token Ù…Ù† Cloudflare
    2. Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ… ÙÙŠ Ø§Ù„Ø³Ø·ÙˆØ± 966-967
    3. Ø§Ø¬Ø¹Ù„ USE_AI_ANALYSIS = true
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@100;200;300;400;500;600;700&family=Amiri+Quran&display=swap" rel="stylesheet">
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        :root { 
            --primary: #0a5f4f; 
            --secondary: #2d8b74; 
            --gold: #d4a574; 
            --dark: #1a1a1a; 
            --light: #f5f5f5; 
            --quran-color: #ffd700;
            --hadith-color: #4CAF50;
            --sidebar-width: 320px;
        }
        
        body { 
            font-family: "IBM Plex Sans Arabic", sans-serif; 
            background: linear-gradient(135deg, #0a5f4f 0%, #1a4a3d 50%, #2d8b74 100%); 
            color: #fff; 
            overflow: hidden; 
            position: relative; 
            height: 100vh; 
            margin: 0;
        }
        
        .glass { 
            background: rgba(255, 255, 255, 0.08); 
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(255, 255, 255, 0.15); 
            border-radius: 24px; 
        }
        
        .container { 
            display: flex; 
            height: 100vh; 
            padding: 20px; 
            gap: 20px; 
            position: relative; 
            z-index: 1; 
        }
        
        /* Sidebar Styles */
        .sidebar { 
            width: var(--sidebar-width);
            display: flex; 
            flex-direction: column; 
            padding: 1.5rem; 
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .sidebar.collapsed {
            transform: translateX(calc(var(--sidebar-width) + 20px));
        }
        
        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }
        
        .sidebar-title {
            color: var(--gold);
            font-family: 'Amiri Quran';
            font-size: 1.3rem;
        }
        
        .toggle-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        
        .toggle-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }
        
        .new-chat-btn {
            background: var(--gold);
            color: var(--dark);
            border: none;
            border-radius: 12px;
            padding: 0.9rem;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .new-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 165, 116, 0.4);
        }
        
        .chats-container {
            flex: 1;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        
        .chats-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .chats-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .chats-container::-webkit-scrollbar-thumb {
            background: rgba(212, 165, 116, 0.5);
            border-radius: 10px;
        }
        
        .chat-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .chat-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--gold);
            transform: translateX(-5px);
        }
        
        .chat-item.active {
            background: rgba(212, 165, 116, 0.2);
            border-color: var(--gold);
        }
        
        .chat-title {
            font-size: 0.95rem;
            margin-bottom: 0.3rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .chat-time {
            font-size: 0.75rem;
            opacity: 0.6;
        }
        
        .delete-chat {
            position: absolute;
            top: 50%;
            left: 1rem;
            transform: translateY(-50%);
            background: rgba(255, 59, 48, 0.8);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.4rem 0.8rem;
            cursor: pointer;
            font-size: 0.85rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .chat-item:hover .delete-chat {
            opacity: 1;
        }
        
        /* Main Area */
        .main-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        .header {
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .app-title {
            font-family: 'Amiri Quran';
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }
        
        .app-subtitle {
            font-size: 0.95rem;
            opacity: 0.8;
        }
        
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            scroll-behavior: smooth;
        }
        
        .chat-area::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-area::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .chat-area::-webkit-scrollbar-thumb {
            background: rgba(212, 165, 116, 0.5);
            border-radius: 10px;
        }
        
        .message {
            margin-bottom: 1.5rem;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message-header {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 0.8rem;
        }
        
        .message-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .user-icon {
            background: rgba(212, 165, 116, 0.2);
            border: 1px solid var(--gold);
        }
        
        .assistant-icon {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .message-role {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .message-content {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.2rem;
            margin-right: 3rem;
            line-height: 1.8;
        }
        
        .user .message-content {
            background: rgba(212, 165, 116, 0.15);
            border-color: var(--gold);
        }
        
        .quran-verse {
            font-family: 'Amiri Quran';
            font-size: 1.3rem;
            color: var(--quran-color);
            display: block;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 215, 0, 0.05);
            border-right: 4px solid var(--quran-color);
            border-radius: 8px;
            line-height: 2;
        }
        
        .hadith-text {
            font-size: 1.1rem;
            color: #e8f5e9;
            display: block;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(76, 175, 80, 0.1);
            border-right: 4px solid var(--hadith-color);
            border-radius: 8px;
            line-height: 1.9;
        }
        
        .source-badge {
            display: inline-block;
            background: rgba(212, 165, 116, 0.3);
            color: var(--gold);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 1rem;
            border: 1px solid rgba(212, 165, 116, 0.5);
        }
        
        .similar-questions {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .similar-title {
            font-weight: 600;
            margin-bottom: 0.8rem;
            color: var(--gold);
            font-size: 0.95rem;
        }
        
        .question-btn {
            display: block;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 0.8rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            text-align: right;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .question-btn:hover {
            background: rgba(212, 165, 116, 0.2);
            border-color: var(--gold);
            transform: translateX(-5px);
        }
        
        .input-area {
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .input-wrapper {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }
        
        #userInput {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 1rem 1.2rem;
            color: white;
            font-size: 1rem;
            resize: none;
            min-height: 50px;
            max-height: 150px;
            font-family: "IBM Plex Sans Arabic", sans-serif;
            transition: all 0.3s ease;
        }
        
        #userInput:focus {
            outline: none;
            border-color: var(--gold);
            background: rgba(255, 255, 255, 0.12);
        }
        
        #userInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .send-btn {
            background: var(--gold);
            border: none;
            border-radius: 14px;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.4rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(212, 165, 116, 0.4);
        }
        
        .send-btn:active {
            transform: scale(0.95);
        }
        
        .input-info {
            text-align: center;
            font-size: 0.75rem;
            opacity: 0.6;
            margin-top: 0.5rem;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0a5f4f 0%, #1a4a3d 50%, #2d8b74 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-content {
            text-align: center;
        }
        
        .loading-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .loading-title {
            font-family: 'Amiri Quran';
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 1rem;
        }
        
        .loading-text {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .loading-progress {
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 0 auto;
        }
        
        .loading-progress-fill {
            height: 100%;
            background: var(--gold);
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0;
        }
        
        /* Floating Toggle Button */
        .floating-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 14px;
            background: var(--gold);
            color: var(--dark);
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(212, 165, 116, 0.3);
            transition: all 0.3s ease;
        }
        
        .floating-toggle:hover {
            transform: scale(1.05);
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                right: 0;
                bottom: 0;
                width: 85%;
                max-width: 320px;
                z-index: 1001;
                padding: 1rem;
                transform: translateX(100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .floating-toggle {
                display: flex;
            }
            
            .app-title {
                font-size: 1.5rem;
            }
            
            .chat-area {
                padding: 1rem;
            }
            
            .message-content {
                margin-right: 0;
            }
            
            .quran-verse {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-icon">ğŸ“–</div>
            <div class="loading-title">Ø§Ø³Ø£Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… AI</div>
            <div class="loading-text" id="loadingText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            <div class="loading-progress">
                <div class="loading-progress-fill" id="progressFill"></div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar glass" id="sidebar">
            <div class="sidebar-header">
                <span class="sidebar-title">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</span>
                <button class="toggle-btn" onclick="toggleSidebar()">âœ•</button>
            </div>
            
            <button class="new-chat-btn" onclick="createNewChat()">
                â• Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </button>
            
            <div class="chats-container" id="chatsContainer">
                <!-- Chat items will be added here dynamically -->
            </div>
        </aside>
        
        <!-- Main Area -->
        <main class="main-area glass">
            <div class="header">
                <h1 class="app-title">Ø§Ø³Ø£Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… AI</h1>
                <p class="app-subtitle">Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© - Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù‘Ù†Ø©</p>
            </div>
            
            <div class="chat-area" id="chatArea">
                <!-- Messages will be added here dynamically -->
            </div>
            
            <div class="input-area">
                <div class="input-wrapper">
                    <textarea 
                        id="userInput" 
                        placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§... (Ù…Ø«Ø§Ù„: Ù…Ø§ Ù‡ÙŠ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ Ø£Ùˆ Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©)" 
                        rows="1"
                        oninput="autoResize(this)"
                        onkeydown="handleKeyDown(event)"
                    ></textarea>
                    <button class="send-btn" onclick="sendMessage()" id="sendBtn">
                        ğŸ“¨
                    </button>
                </div>
                <div class="input-info">
                    Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø£Ùˆ Shift+Enter Ù„Ù„Ø³Ø·Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯
                </div>
            </div>
        </main>
        
        <!-- Floating Toggle Button for Mobile -->
        <button class="floating-toggle" id="floatingToggle">â˜°</button>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let chats = [];
        let currentChatId = null;
        let quranData = null;
        let hadithDatabase = {};
        let arabicHadiths = [];
        let isQuranLoaded = false;
        let isHadithLoaded = false;
        
        // âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cloudflare AI (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ†Ù‡)
        const CLOUDFLARE_ACCOUNT_ID = 'YOUR_ACCOUNT_ID';
        const CLOUDFLARE_API_TOKEN = 'YOUR_API_TOKEN';
        const USE_AI_ANALYSIS = false; // Ø§Ø¬Ø¹Ù„Ù‡Ø§ true Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Cloudflare AI
        
        // Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù‚Ø±Ø¢Ù† - ÙƒÙ…Ø§ Ù‡ÙŠ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
        const QURAN_SOURCES = [
            'https://cdn.jsdelivr.net/npm/quran-json@3.1.2/quran.json',
            'https://api.alquran.cloud/v1/quran/quran-uthmani',
            'https://raw.githubusercontent.com/semarketir/quranjson/master/source/quran.json'
        ];
        
        // Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«
        const HADITH_SOURCES = [
            'bukhari', 'muslim', 'tirmidhi', 'nasai', 'abudawud', 'ibnmajah', 'malik', 'ahmad'
        ];
        
        // Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø¹Ø±ÙÙŠØ© Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        const KNOWLEDGE_BASE = {
            // Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…
            'Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…': {
                answer: `Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø®Ù…Ø³Ø©:

1ï¸âƒ£ Ø´Ù‡Ø§Ø¯Ø© Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡
2ï¸âƒ£ Ø¥Ù‚Ø§Ù… Ø§Ù„ØµÙ„Ø§Ø©
3ï¸âƒ£ Ø¥ÙŠØªØ§Ø¡ Ø§Ù„Ø²ÙƒØ§Ø©
4ï¸âƒ£ ØµÙˆÙ… Ø±Ù…Ø¶Ø§Ù†
5ï¸âƒ£ Ø­Ø¬ Ø§Ù„Ø¨ÙŠØª Ù„Ù…Ù† Ø§Ø³ØªØ·Ø§Ø¹ Ø¥Ù„ÙŠÙ‡ Ø³Ø¨ÙŠÙ„Ø§Ù‹

Ù‚Ø§Ù„ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù…: "Ø¨Ù†ÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¹Ù„Ù‰ Ø®Ù…Ø³: Ø´Ù‡Ø§Ø¯Ø© Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ØŒ ÙˆØ¥Ù‚Ø§Ù… Ø§Ù„ØµÙ„Ø§Ø©ØŒ ÙˆØ¥ÙŠØªØ§Ø¡ Ø§Ù„Ø²ÙƒØ§Ø©ØŒ ÙˆØµÙˆÙ… Ø±Ù…Ø¶Ø§Ù†ØŒ ÙˆØ­Ø¬ Ø§Ù„Ø¨ÙŠØª" (Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡)`,
                sources: ['ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…']
            },
            
            // Ø§Ù„ØµÙ„Ø§Ø©
            'Ø§Ù„ØµÙ„Ø§Ø©': {
                answer: `Ø§Ù„ØµÙ„Ø§Ø© Ù‡ÙŠ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŒ ÙˆÙ‡ÙŠ ØµÙ„Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø¨Ø¯ ÙˆØ±Ø¨Ù‡.

ğŸ•Œ **Ø£Ù‡Ù…ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø©:**
- Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¯ÙŠÙ† ÙˆØ£ÙˆÙ„ Ù…Ø§ ÙŠØ­Ø§Ø³Ø¨ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø¹Ø¨Ø¯ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø©
- ÙØ±Ø¶ Ø¹ÙŠÙ† Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ø³Ù„Ù… Ø¨Ø§Ù„Øº Ø¹Ø§Ù‚Ù„
- Ù‚Ø§Ù„ ØªØ¹Ø§Ù„Ù‰: "ÙˆÙØ£ÙÙ‚ÙÙŠÙ…ÙÙˆØ§ Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©Ù ÙˆÙØ¢ØªÙÙˆØ§ Ø§Ù„Ø²ÙÙ‘ÙƒÙØ§Ø©Ù" (Ø§Ù„Ø¨Ù‚Ø±Ø©: 43)

â° **Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø©:**
- Ø§Ù„ÙØ¬Ø±: Ø±ÙƒØ¹ØªØ§Ù†
- Ø§Ù„Ø¸Ù‡Ø±: Ø£Ø±Ø¨Ø¹ Ø±ÙƒØ¹Ø§Øª
- Ø§Ù„Ø¹ØµØ±: Ø£Ø±Ø¨Ø¹ Ø±ÙƒØ¹Ø§Øª
- Ø§Ù„Ù…ØºØ±Ø¨: Ø«Ù„Ø§Ø« Ø±ÙƒØ¹Ø§Øª
- Ø§Ù„Ø¹Ø´Ø§Ø¡: Ø£Ø±Ø¨Ø¹ Ø±ÙƒØ¹Ø§Øª`,
                sources: ['Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…']
            },
            
            // Ø§Ù„ÙˆØ¶ÙˆØ¡
            'Ø§Ù„ÙˆØ¶ÙˆØ¡': {
                answer: `Ø§Ù„ÙˆØ¶ÙˆØ¡ Ù‡Ùˆ Ø§Ù„Ø·Ù‡Ø§Ø±Ø© Ø§Ù„ØµØºØ±Ù‰ØŒ ÙˆÙ‡Ùˆ Ø´Ø±Ø· Ù„ØµØ­Ø© Ø§Ù„ØµÙ„Ø§Ø©.

ğŸ’§ **ÙØ±Ø§Ø¦Ø¶ Ø§Ù„ÙˆØ¶ÙˆØ¡:**
1. Ø§Ù„Ù†ÙŠØ© (ÙÙŠ Ø§Ù„Ù‚Ù„Ø¨)
2. ØºØ³Ù„ Ø§Ù„ÙˆØ¬Ù‡
3. ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±ÙÙ‚ÙŠÙ†
4. Ù…Ø³Ø­ Ø§Ù„Ø±Ø£Ø³
5. ØºØ³Ù„ Ø§Ù„Ø±Ø¬Ù„ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ¹Ø¨ÙŠÙ†
6. Ø§Ù„ØªØ±ØªÙŠØ¨
7. Ø§Ù„Ù…ÙˆØ§Ù„Ø§Ø© (Ø¹Ø¯Ù… Ø§Ù„ØªÙØ±ÙŠÙ‚ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡)

ğŸŒŸ **Ø³Ù†Ù† Ø§Ù„ÙˆØ¶ÙˆØ¡:**
- Ø§Ù„ØªØ³Ù…ÙŠØ©
- Ø§Ù„Ø³ÙˆØ§Ùƒ
- ØºØ³Ù„ Ø§Ù„ÙƒÙÙŠÙ† Ø«Ù„Ø§Ø«Ø§Ù‹
- Ø§Ù„Ù…Ø¶Ù…Ø¶Ø© ÙˆØ§Ù„Ø§Ø³ØªÙ†Ø´Ø§Ù‚ Ø«Ù„Ø§Ø«Ø§Ù‹
- ØªØ®Ù„ÙŠÙ„ Ø§Ù„Ù„Ø­ÙŠØ© ÙˆØ§Ù„Ø£ØµØ§Ø¨Ø¹`,
                sources: ['ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'Ø³Ù†Ù† Ø£Ø¨ÙŠ Ø¯Ø§ÙˆØ¯']
            },
            
            // Ø§Ù„Ø²ÙƒØ§Ø©
            'Ø§Ù„Ø²ÙƒØ§Ø©': {
                answer: `Ø§Ù„Ø²ÙƒØ§Ø© Ù‡ÙŠ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø«Ø§Ù„Ø« Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŒ ÙˆÙ‡ÙŠ Ø­Ù‚ Ù…ÙØ±ÙˆØ¶ ÙÙŠ Ø§Ù„Ù…Ø§Ù„.

ğŸ’° **Ø´Ø±ÙˆØ· ÙˆØ¬ÙˆØ¨ Ø§Ù„Ø²ÙƒØ§Ø©:**
1. Ø§Ù„Ø¥Ø³Ù„Ø§Ù…
2. Ø§Ù„Ø­Ø±ÙŠØ©
3. Ø§Ù„Ù…Ù„Ùƒ Ø§Ù„ØªØ§Ù…
4. Ø¨Ù„ÙˆØº Ø§Ù„Ù†ØµØ§Ø¨
5. Ù…Ø±ÙˆØ± Ø§Ù„Ø­ÙˆÙ„ (Ø³Ù†Ø© Ù‚Ù…Ø±ÙŠØ©)

ğŸ“Š **Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø²ÙƒØ§Ø©:**
- Ø²ÙƒØ§Ø© Ø§Ù„Ù…Ø§Ù„: 2.5Ùª Ù…Ù† Ø§Ù„Ù…Ø§Ù„ Ø¥Ø°Ø§ Ø¨Ù„Øº Ø§Ù„Ù†ØµØ§Ø¨
- Ø²ÙƒØ§Ø© Ø§Ù„Ø°Ù‡Ø¨: Ù†ØµØ§Ø¨Ù‡Ø§ 85 Ø¬Ø±Ø§Ù…Ø§Ù‹
- Ø²ÙƒØ§Ø© Ø§Ù„ÙØ¶Ø©: Ù†ØµØ§Ø¨Ù‡Ø§ 595 Ø¬Ø±Ø§Ù…Ø§Ù‹
- Ø²ÙƒØ§Ø© Ø§Ù„Ø²Ø±ÙˆØ¹ ÙˆØ§Ù„Ø«Ù…Ø§Ø±: 5Ùª Ø£Ùˆ 10Ùª Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ù‚ÙŠ
- Ø²ÙƒØ§Ø© Ø§Ù„Ø£Ù†Ø¹Ø§Ù… (Ø§Ù„Ø¥Ø¨Ù„ ÙˆØ§Ù„Ø¨Ù‚Ø± ÙˆØ§Ù„ØºÙ†Ù…)`,
                sources: ['Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…']
            },
            
            // Ø§Ù„ØµÙŠØ§Ù…
            'Ø§Ù„ØµÙŠØ§Ù…': {
                answer: `Ø§Ù„ØµÙŠØ§Ù… Ù‡Ùˆ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŒ ÙˆÙ‡Ùˆ Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ Ø¹Ù† Ø§Ù„Ù…ÙØ·Ø±Ø§Øª Ù…Ù† Ø·Ù„ÙˆØ¹ Ø§Ù„ÙØ¬Ø± Ø¥Ù„Ù‰ ØºØ±ÙˆØ¨ Ø§Ù„Ø´Ù…Ø³.

ğŸŒ™ **Ø´Ø±ÙˆØ· ÙˆØ¬ÙˆØ¨ Ø§Ù„ØµÙŠØ§Ù…:**
1. Ø§Ù„Ø¥Ø³Ù„Ø§Ù…
2. Ø§Ù„Ø¨Ù„ÙˆØº
3. Ø§Ù„Ø¹Ù‚Ù„
4. Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØµÙŠØ§Ù…
5. Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© (Ø¹Ø¯Ù… Ø§Ù„Ø³ÙØ±)
6. Ø§Ù„Ø®Ù„Ùˆ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù†Ø¹ (ÙƒØ§Ù„Ø­ÙŠØ¶ ÙˆØ§Ù„Ù†ÙØ§Ø³ Ù„Ù„Ù†Ø³Ø§Ø¡)

âŒ **Ù…Ø¨Ø·Ù„Ø§Øª Ø§Ù„ØµÙŠØ§Ù…:**
- Ø§Ù„Ø£ÙƒÙ„ ÙˆØ§Ù„Ø´Ø±Ø¨ Ø¹Ù…Ø¯Ø§Ù‹
- Ø§Ù„Ø¬Ù…Ø§Ø¹
- Ø¥Ù†Ø²Ø§Ù„ Ø§Ù„Ù…Ù†ÙŠ Ø¨Ø´Ù‡ÙˆØ©
- Ø§Ù„Ù‚ÙŠØ¡ Ø¹Ù…Ø¯Ø§Ù‹
- Ø®Ø±ÙˆØ¬ Ø¯Ù… Ø§Ù„Ø­ÙŠØ¶ Ø£Ùˆ Ø§Ù„Ù†ÙØ§Ø³

âœ¨ **Ø³Ù†Ù† Ø§Ù„ØµÙŠØ§Ù…:**
- ØªØ¹Ø¬ÙŠÙ„ Ø§Ù„ÙØ·ÙˆØ±
- ØªØ£Ø®ÙŠØ± Ø§Ù„Ø³Ø­ÙˆØ±
- Ø§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµØ§Ù„Ø­Ø©`,
                sources: ['Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…']
            },
            
            // Ø§Ù„Ø­Ø¬
            'Ø§Ù„Ø­Ø¬': {
                answer: `Ø§Ù„Ø­Ø¬ Ù‡Ùˆ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø®Ø§Ù…Ø³ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŒ ÙˆÙ‡Ùˆ Ù‚ØµØ¯ Ø¨ÙŠØª Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ø±Ø§Ù… Ù„Ø£Ø¯Ø§Ø¡ Ù…Ù†Ø§Ø³Ùƒ Ù…Ø®ØµÙˆØµØ©.

ğŸ•‹ **Ø´Ø±ÙˆØ· ÙˆØ¬ÙˆØ¨ Ø§Ù„Ø­Ø¬:**
1. Ø§Ù„Ø¥Ø³Ù„Ø§Ù…
2. Ø§Ù„Ø¨Ù„ÙˆØº
3. Ø§Ù„Ø¹Ù‚Ù„
4. Ø§Ù„Ø§Ø³ØªØ·Ø§Ø¹Ø© (Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø¨Ø¯Ù†ÙŠØ©)
5. Ø£Ù…Ù† Ø§Ù„Ø·Ø±ÙŠÙ‚
6. Ø§Ù„Ù…Ø­Ø±Ù… Ù„Ù„Ù…Ø±Ø£Ø©

ğŸ“¿ **Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬:**
1. Ø§Ù„Ø¥Ø­Ø±Ø§Ù…
2. Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©
3. Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©
4. Ø§Ù„Ø³Ø¹ÙŠ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©

ğŸ¯ **ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ø­Ø¬:**
- Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ù…Ù† Ø§Ù„Ù…ÙŠÙ‚Ø§Øª
- Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ØºØ±ÙˆØ¨
- Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ø²Ø¯Ù„ÙØ©
- Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ù†Ù‰
- Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª
- Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹`,
                sources: ['Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…']
            },
            
            // Ø§Ù„Ø´Ù‡Ø§Ø¯ØªØ§Ù†
            'Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©': {
                answer: `Ø§Ù„Ø´Ù‡Ø§Ø¯ØªØ§Ù† Ù‡Ù…Ø§ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù….

ğŸ¤² **Ù†Øµ Ø§Ù„Ø´Ù‡Ø§Ø¯ØªÙŠÙ†:**
"Ø£Ø´Ù‡Ø¯ Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ£Ø´Ù‡Ø¯ Ø£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡"

ğŸ“– **Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©:**

**Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡:**
- Ù†ÙÙŠ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ© Ø¹Ù† ÙƒÙ„ Ù…Ø§ Ø³ÙˆÙ‰ Ø§Ù„Ù„Ù‡
- Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ© Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡
- Ø§Ù„ÙƒÙØ± Ø¨Ø§Ù„Ø·Ø§ØºÙˆØª ÙˆØ§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù„Ù‡

**Ù…Ø­Ù…Ø¯ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡:**
- ØªØµØ¯ÙŠÙ‚Ù‡ ÙÙŠÙ…Ø§ Ø£Ø®Ø¨Ø±
- Ø·Ø§Ø¹ØªÙ‡ ÙÙŠÙ…Ø§ Ø£Ù…Ø±
- Ø§Ø¬ØªÙ†Ø§Ø¨ Ù…Ø§ Ù†Ù‡Ù‰ Ø¹Ù†Ù‡ ÙˆØ²Ø¬Ø±
- Ø¹Ø¯Ù… Ø¹Ø¨Ø§Ø¯Ø© Ø§Ù„Ù„Ù‡ Ø¥Ù„Ø§ Ø¨Ù…Ø§ Ø´Ø±Ø¹`,
                sources: ['Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…']
            },
            
            // Ø§Ù„ØªÙˆØ­ÙŠØ¯
            'Ø§Ù„ØªÙˆØ­ÙŠØ¯': {
                answer: `Ø§Ù„ØªÙˆØ­ÙŠØ¯ Ù‡Ùˆ Ø¥ÙØ±Ø§Ø¯ Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰ Ø¨Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©ØŒ ÙˆÙ‡Ùˆ Ø£Ø¹Ø¸Ù… ÙˆØ§Ø¬Ø¨.

ğŸŒŸ **Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙˆØ­ÙŠØ¯:**

1ï¸âƒ£ **ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ©:**
   - Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø£Ù† Ø§Ù„Ù„Ù‡ Ù‡Ùˆ Ø§Ù„Ø®Ø§Ù„Ù‚ Ø§Ù„Ø±Ø§Ø²Ù‚ Ø§Ù„Ù…Ø¯Ø¨Ø±

2ï¸âƒ£ **ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ©:**
   - Ø¥ÙØ±Ø§Ø¯ Ø§Ù„Ù„Ù‡ Ø¨Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©
   - Ø¹Ø¯Ù… ØµØ±Ù Ø£ÙŠ Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø© Ù„ØºÙŠØ± Ø§Ù„Ù„Ù‡

3ï¸âƒ£ **ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„ØµÙØ§Øª:**
   - Ø¥Ø«Ø¨Ø§Øª Ù…Ø§ Ø£Ø«Ø¨ØªÙ‡ Ø§Ù„Ù„Ù‡ Ù„Ù†ÙØ³Ù‡ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„ØµÙØ§Øª
   - ØªÙ†Ø²ÙŠÙ‡ Ø§Ù„Ù„Ù‡ Ø¹Ù† Ù…Ø´Ø§Ø¨Ù‡Ø© Ø§Ù„Ù…Ø®Ù„ÙˆÙ‚ÙŠÙ†

Ù‚Ø§Ù„ ØªØ¹Ø§Ù„Ù‰: "Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ * Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØµÙÙ‘Ù…ÙØ¯Ù * Ù„ÙÙ…Ù’ ÙŠÙÙ„ÙØ¯Ù’ ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙˆÙ„ÙØ¯Ù’ * ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙƒÙÙ† Ù„ÙÙ‘Ù‡Ù ÙƒÙÙÙÙˆÙ‹Ø§ Ø£ÙØ­ÙØ¯ÙŒ" (Ø§Ù„Ø¥Ø®Ù„Ø§Øµ)`,
                sources: ['Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ']
            },
            
            // Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†
            'Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†': {
                answer: `Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ù‡Ùˆ Ø§Ù„ØªØµØ¯ÙŠÙ‚ Ø§Ù„Ø¬Ø§Ø²Ù… Ø¨Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ù„Ø³Ø§Ù† ÙˆØ§Ù„Ø¹Ù…Ù„.

ğŸ’« **Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø§Ù„Ø³ØªØ©:**

1ï¸âƒ£ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù„Ù‡
2ï¸âƒ£ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ©
3ï¸âƒ£ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ©
4ï¸âƒ£ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø±Ø³Ù„
5ï¸âƒ£ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¢Ø®Ø±
6ï¸âƒ£ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù‚Ø¯Ø± Ø®ÙŠØ±Ù‡ ÙˆØ´Ø±Ù‡

Ù‚Ø§Ù„ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù…: "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø£Ù† ØªØ¤Ù…Ù† Ø¨Ø§Ù„Ù„Ù‡ ÙˆÙ…Ù„Ø§Ø¦ÙƒØªÙ‡ ÙˆÙƒØªØ¨Ù‡ ÙˆØ±Ø³Ù„Ù‡ ÙˆØ§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¢Ø®Ø± ÙˆØªØ¤Ù…Ù† Ø¨Ø§Ù„Ù‚Ø¯Ø± Ø®ÙŠØ±Ù‡ ÙˆØ´Ø±Ù‡" (Ø±ÙˆØ§Ù‡ Ù…Ø³Ù„Ù…)

ğŸ“ˆ **Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† ÙŠØ²ÙŠØ¯ ÙˆÙŠÙ†Ù‚Øµ:**
- ÙŠØ²ÙŠØ¯ Ø¨Ø§Ù„Ø·Ø§Ø¹Ø© ÙˆØ§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ§Ù„Ø­
- ÙŠÙ†Ù‚Øµ Ø¨Ø§Ù„Ù…Ø¹ØµÙŠØ© ÙˆØ§Ù„Ø°Ù†ÙˆØ¨`,
                sources: ['ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…', 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ']
            }
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', async function() {
            await initializeApp();
        });
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        async function initializeApp() {
            try {
                updateLoadingText('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…...', 0);
                
                await loadChats();
                await loadQuranData();
                await loadAllArabicHadiths();
                
                setTimeout(() => {
                    document.getElementById('loadingOverlay').classList.add('hidden');
                    showWelcomeMessage();
                    
                    const userInput = document.getElementById('userInput');
                    if (userInput) {
                        userInput.focus();
                    }
                }, 500);
                
                setupEventListeners();
                window.addEventListener('resize', handleResize);
                handleResize();
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:', error);
                document.getElementById('loadingText').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.';
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function updateLoadingText(text, progress) {
            const loadingText = document.getElementById('loadingText');
            const progressFill = document.getElementById('progressFill');
            
            if (loadingText) loadingText.textContent = text;
            if (progressFill) progressFill.style.width = `${progress}%`;
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - ÙƒÙ…Ø§ Ù‡ÙŠ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
        async function loadQuranData() {
            updateLoadingText('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…...', 30);
            
            for (let i = 0; i < QURAN_SOURCES.length; i++) {
                try {
                    console.log(`ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± ${i + 1}: ${QURAN_SOURCES[i]}`);
                    const response = await fetch(QURAN_SOURCES[i]);
                    
                    if (!response.ok) {
                        throw new Error(`ÙØ´Ù„ HTTP: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    if (QURAN_SOURCES[i].includes('alquran.cloud')) {
                        quranData = processAlQuranCloudData(data);
                    } else if (QURAN_SOURCES[i].includes('semarketir')) {
                        quranData = processSemarketirData(data);
                    } else {
                        quranData = processDefaultQuranData(data);
                    }
                    
                    if (quranData && quranData.length > 0) {
                        isQuranLoaded = true;
                        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± ${i + 1}`);
                        console.log(`ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ù…Ø­Ù…Ù„Ø©: ${quranData.length}`);
                        return;
                    }
                    
                } catch (error) {
                    console.error(`âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± ${i + 1}:`, error);
                    if (i === QURAN_SOURCES.length - 1) {
                        console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ø±');
                        isQuranLoaded = false;
                    }
                }
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª alquran.cloud
        function processAlQuranCloudData(data) {
            if (!data || !data.data || !data.data.surahs) return null;
            
            return data.data.surahs.map(surah => ({
                id: surah.number,
                name: surah.name,
                transliteration: surah.englishName,
                translation: surah.englishNameTranslation,
                type: surah.revelationType,
                total_verses: surah.ayahs.length,
                verses: surah.ayahs.map(ayah => ({
                    id: ayah.numberInSurah,
                    text: ayah.text,
                    number: ayah.numberInSurah
                }))
            }));
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª semarketir
        function processSemarketirData(data) {
            if (!data || !Array.isArray(data)) return null;
            
            return data.map(surah => ({
                id: surah.index,
                name: surah.title,
                transliteration: surah.titleAr,
                translation: surah.title,
                type: surah.type,
                total_verses: surah.count,
                verses: (surah.verses || []).map((verse, idx) => ({
                    id: idx + 1,
                    text: verse.text,
                    number: idx + 1
                }))
            }));
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        function processDefaultQuranData(data) {
            if (!data || !Array.isArray(data)) return null;
            
            return data.map(surah => ({
                id: surah.id || surah.number,
                name: surah.name || surah.transliteration,
                transliteration: surah.transliteration || surah.name,
                translation: surah.translation || '',
                type: surah.type || 'Meccan',
                total_verses: surah.total_verses || (surah.verses ? surah.verses.length : 0),
                verses: (surah.verses || []).map(verse => ({
                    id: verse.id || verse.number,
                    text: verse.text || verse.verse,
                    number: verse.number || verse.id
                }))
            }));
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«
        async function loadAllArabicHadiths() {
            updateLoadingText('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«...', 60);
            
            try {
                const response = await fetch('https://cdn.jsdelivr.net/gh/fawazahmed0/hadith-api@1/editions/ara-bukhari.json');
                
                if (response.ok) {
                    const data = await response.json();
                    if (data && data.hadiths) {
                        arabicHadiths = data.hadiths;
                        isHadithLoaded = true;
                        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${arabicHadiths.length} Ø­Ø¯ÙŠØ« Ù…Ù† ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ`);
                    }
                }
            } catch (error) {
                console.error('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«:', error);
                isHadithLoaded = false;
            }
            
            updateLoadingText('ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 100);
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function loadChats() {
            const savedChats = localStorage.getItem('islamicAIChats');
            if (savedChats) {
                chats = JSON.parse(savedChats);
                updateChatsDisplay();
                
                if (chats.length > 0) {
                    loadChat(chats[0].id);
                }
            }
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
        function saveChatsToStorage() {
            localStorage.setItem('islamicAIChats', JSON.stringify(chats));
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function createNewChat() {
            const newChat = {
                id: Date.now(),
                title: 'Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©',
                timestamp: new Date().toISOString(),
                messages: []
            };
            
            chats.unshift(newChat);
            saveChatsToStorage();
            updateChatsDisplay();
            loadChat(newChat.id);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
        function updateChatsDisplay() {
            const chatsContainer = document.getElementById('chatsContainer');
            chatsContainer.innerHTML = '';
            
            chats.forEach(chat => {
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                if (chat.id === currentChatId) {
                    chatItem.classList.add('active');
                }
                
                const date = new Date(chat.timestamp);
                const timeStr = date.toLocaleString('ar-EG', { 
                    month: 'short', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                chatItem.innerHTML = `
                    <div class="chat-title">${chat.title}</div>
                    <div class="chat-time">${timeStr}</div>
                    <button class="delete-chat" onclick="deleteChat(${chat.id}, event)">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                `;
                
                chatItem.onclick = () => loadChat(chat.id);
                chatsContainer.appendChild(chatItem);
            });
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ù…Ø­Ø§Ø¯Ø«Ø©
        function loadChat(chatId) {
            const chat = chats.find(c => c.id === chatId);
            if (!chat) return;
            
            currentChatId = chatId;
            updateChatsDisplay();
            
            const chatArea = document.getElementById('chatArea');
            chatArea.innerHTML = '';
            
            chat.messages.forEach(msg => {
                addMessage(
                    msg.role,
                    msg.content,
                    msg.source,
                    msg.questions,
                    false,
                    msg.isSingleAyah,
                    msg.isCompleteSurah,
                    msg.isHadith
                );
            });
        }
        
        // Ø­Ø°Ù Ù…Ø­Ø§Ø¯Ø«Ø©
        function deleteChat(chatId, event) {
            event.stopPropagation();
            
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŸ')) {
                chats = chats.filter(c => c.id !== chatId);
                saveChatsToStorage();
                updateChatsDisplay();
                
                if (currentChatId === chatId) {
                    if (chats.length > 0) {
                        loadChat(chats[0].id);
                    } else {
                        createNewChat();
                    }
                }
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        function updateChatTitle(chat) {
            if (chat.messages.length === 0) return;
            
            const firstUserMessage = chat.messages.find(m => m.role === 'user');
            if (firstUserMessage) {
                chat.title = firstUserMessage.content.substring(0, 50) + (firstUserMessage.content.length > 50 ? '...' : '');
                updateChatsDisplay();
            }
        }
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨
        function showWelcomeMessage() {
            if (!currentChatId) {
                createNewChat();
            }
            
            const chatArea = document.getElementById('chatArea');
            if (chatArea.children.length === 0) {
                const welcomeMessage = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡ ğŸŒ™

Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ **Ø§Ø³Ø£Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… AI** - Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©

âœ¨ **ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:**
â€¢ ğŸ“– ØªÙØ³ÙŠØ± Ø¢ÙŠØ§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…
â€¢ ğŸ“š Ø´Ø±Ø­ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨ÙˆÙŠØ© Ø§Ù„Ø´Ø±ÙŠÙØ©
â€¢ ğŸ•Œ Ø£Ø­ÙƒØ§Ù… Ø§Ù„ÙÙ‚Ù‡ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ
â€¢ ğŸ¤² Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª (Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„Ø²ÙƒØ§Ø©ØŒ Ø§Ù„ØµÙŠØ§Ù…ØŒ Ø§Ù„Ø­Ø¬)
â€¢ ğŸ’« Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† ÙˆØ§Ù„Ø¥Ø³Ù„Ø§Ù…
â€¢ ğŸŒŸ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ ÙˆØ§Ù„Ø¢Ø¯Ø§Ø¨ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©

**Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:**
- Ù…Ø§ Ù‡ÙŠ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ
- Ø§Ø¹Ø±Ø¶ Ù„ÙŠ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©
- Ø§Ø¨Ø­Ø« Ø¹Ù† Ø­Ø¯ÙŠØ« Ø¹Ù† Ø§Ù„ØµÙ„Ø§Ø©
- Ù…Ø§ Ù‡ÙŠ Ø´Ø±ÙˆØ· Ø§Ù„ÙˆØ¶ÙˆØ¡ØŸ

Ø¬Ø±Ø¨ Ø§Ù„Ø¢Ù† ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ©! ğŸš€`;
                
                addMessage('assistant', welcomeMessage, null, null, true);
            }
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
        async function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (!message) return;
            
            if (!currentChatId) {
                createNewChat();
            }
            
            addMessage('user', message, null, null, true);
            userInput.value = '';
            autoResize(userInput);
            
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            sendBtn.textContent = 'â³';
            
            try {
                const response = await processMessage(message);
                addMessage('assistant', response.content, response.source, response.questions, true, response.isSingleAyah, response.isCompleteSurah, response.isHadith);
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
                addMessage('assistant', 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø³Ø¤Ø§Ù„Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', null, null, true);
            }
            
            sendBtn.disabled = false;
            sendBtn.textContent = 'ğŸ“¨';
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© - Ù…Ø­Ø³Ù‘Ù†Ø©
        async function processMessage(message) {
            const lowerMessage = message.toLowerCase().trim();
            
            // 1. Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø£ÙˆÙ„Ø§Ù‹
            if (isQuranLoaded) {
                // ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ù„Ø¨ Ø¢ÙŠØ© ÙˆØ§Ø­Ø¯Ø©
                if (isSingleAyahRequest(message)) {
                    const ayah = findSingleAyah(message);
                    if (ayah) {
                        return {
                            content: ayah.text,
                            source: `${ayah.surahName} - Ø§Ù„Ø¢ÙŠØ© ${ayah.number}`,
                            questions: getSimilarQuestions(message),
                            isSingleAyah: true
                        };
                    }
                }
                
                // ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ù„Ø¨ Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©
                if (isCompleteSurahRequest(message)) {
                    const surah = findCompleteSurah(message);
                    if (surah) {
                        const surahText = surah.verses.map(v => `${v.text} ï´¿${v.number}ï´¾`).join('\n\n');
                        return {
                            content: surahText,
                            source: `Ø³ÙˆØ±Ø© ${surah.name} - ${surah.total_verses} Ø¢ÙŠØ©`,
                            questions: getSimilarQuestions(message),
                            isCompleteSurah: true
                        };
                    }
                }
            }
            
            // 2. Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«
            if (isHadithQuestion(message) && isHadithLoaded) {
                const hadith = searchHadith(message);
                if (hadith) {
                    return {
                        content: hadith.text,
                        source: hadith.source,
                        questions: getSimilarQuestions(message),
                        isHadith: true
                    };
                }
            }
            
            // 3. Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ© Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©
            for (const [topic, data] of Object.entries(KNOWLEDGE_BASE)) {
                if (lowerMessage.includes(topic.toLowerCase())) {
                    return {
                        content: data.answer,
                        source: `Ø§Ù„Ù…ØµØ§Ø¯Ø±: ${data.sources.join('ØŒ ')}`,
                        questions: getSimilarQuestions(message)
                    };
                }
            }
            
            // 4. Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹
            const topicMatch = findTopicMatch(lowerMessage);
            if (topicMatch) {
                return {
                    content: topicMatch.answer,
                    source: `Ø§Ù„Ù…ØµØ§Ø¯Ø±: ${topicMatch.sources.join('ØŒ ')}`,
                    questions: getSimilarQuestions(message)
                };
            }
            
            // 5. Ø±Ø¯ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù…Ø­Ø³Ù‘Ù†
            return {
                content: generateImprovedDefaultResponse(message),
                source: 'Ù…ØµØ§Ø¯Ø± Ù…ØªÙ†ÙˆØ¹Ø©',
                questions: getSimilarQuestions(message)
            };
        }
        
        // Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù… Ø¹Ù† Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹
        function findTopicMatch(message) {
            const topicKeywords = {
                'Ø­ÙƒÙ… Ø§Ù„ØµÙ„Ø§Ø©': {
                    keywords: ['Ø­ÙƒÙ…', 'ÙØ±Ø¶', 'ÙˆØ§Ø¬Ø¨', 'ØµÙ„Ø§Ø©'],
                    answer: KNOWLEDGE_BASE['Ø§Ù„ØµÙ„Ø§Ø©'].answer,
                    sources: KNOWLEDGE_BASE['Ø§Ù„ØµÙ„Ø§Ø©'].sources
                },
                'Ø´Ø±ÙˆØ· Ø§Ù„ÙˆØ¶ÙˆØ¡': {
                    keywords: ['Ø´Ø±ÙˆØ·', 'ÙØ±Ø§Ø¦Ø¶', 'ÙˆØ§Ø¬Ø¨Ø§Øª', 'ÙˆØ¶ÙˆØ¡'],
                    answer: KNOWLEDGE_BASE['Ø§Ù„ÙˆØ¶ÙˆØ¡'].answer,
                    sources: KNOWLEDGE_BASE['Ø§Ù„ÙˆØ¶ÙˆØ¡'].sources
                },
                'Ù†ØµØ§Ø¨ Ø§Ù„Ø²ÙƒØ§Ø©': {
                    keywords: ['Ù†ØµØ§Ø¨', 'Ù…Ù‚Ø¯Ø§Ø±', 'ÙƒÙ…', 'Ø²ÙƒØ§Ø©'],
                    answer: KNOWLEDGE_BASE['Ø§Ù„Ø²ÙƒØ§Ø©'].answer,
                    sources: KNOWLEDGE_BASE['Ø§Ù„Ø²ÙƒØ§Ø©'].sources
                },
                'Ù…Ø¨Ø·Ù„Ø§Øª Ø§Ù„ØµÙŠØ§Ù…': {
                    keywords: ['Ù…Ø¨Ø·Ù„Ø§Øª', 'Ù…ÙØ·Ø±Ø§Øª', 'ÙŠÙØ·Ø±', 'ØµÙŠØ§Ù…', 'ØµÙˆÙ…'],
                    answer: KNOWLEDGE_BASE['Ø§Ù„ØµÙŠØ§Ù…'].answer,
                    sources: KNOWLEDGE_BASE['Ø§Ù„ØµÙŠØ§Ù…'].sources
                },
                'Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬': {
                    keywords: ['Ø£Ø±ÙƒØ§Ù†', 'ÙˆØ§Ø¬Ø¨Ø§Øª', 'Ø´Ø±ÙˆØ·', 'Ø­Ø¬'],
                    answer: KNOWLEDGE_BASE['Ø§Ù„Ø­Ø¬'].answer,
                    sources: KNOWLEDGE_BASE['Ø§Ù„Ø­Ø¬'].sources
                }
            };
            
            for (const [topic, data] of Object.entries(topicKeywords)) {
                const matchCount = data.keywords.filter(kw => message.includes(kw)).length;
                if (matchCount >= 2) {
                    return {
                        answer: data.answer,
                        sources: data.sources
                    };
                }
            }
            
            return null;
        }
        
        // ØªÙˆÙ„ÙŠØ¯ Ø±Ø¯ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù…Ø­Ø³Ù‘Ù†
        function generateImprovedDefaultResponse(message) {
            let response = 'Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ. ';
            
            // ØªØ­Ù„ÙŠÙ„ Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„
            if (message.includes('ÙƒÙŠÙ') || message.includes('Ø·Ø±ÙŠÙ‚Ø©')) {
                response += 'Ø³Ø¤Ø§Ù„Ùƒ ÙŠØªØ¹Ù„Ù‚ Ø¨ÙƒÙŠÙÙŠØ© Ø£Ø¯Ø§Ø¡ Ø¹Ø¨Ø§Ø¯Ø© Ø£Ùˆ Ø¹Ù…Ù„ Ù…Ø¹ÙŠÙ†. ';
            } else if (message.includes('Ù„Ù…Ø§Ø°Ø§') || message.includes('Ø§Ù„Ø³Ø¨Ø¨')) {
                response += 'Ø³Ø¤Ø§Ù„Ùƒ ÙŠØ¨Ø­Ø« Ø¹Ù† Ø­ÙƒÙ…Ø© Ø£Ùˆ Ø³Ø¨Ø¨ Ø´Ø±Ø¹ÙŠ. ';
            } else if (message.includes('Ù…Ø§ Ù‡Ùˆ') || message.includes('Ù…Ø§ Ù‡ÙŠ')) {
                response += 'Ø³Ø¤Ø§Ù„Ùƒ ÙŠØ·Ù„Ø¨ ØªØ¹Ø±ÙŠÙØ§Ù‹ Ø£Ùˆ Ø´Ø±Ø­Ø§Ù‹. ';
            } else if (message.includes('Ù‡Ù„') || message.includes('Ø£ÙŠØ¬ÙˆØ²')) {
                response += 'Ø³Ø¤Ø§Ù„Ùƒ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø­ÙƒÙ… Ø´Ø±Ø¹ÙŠ. ';
            }
            
            response += '\n\n';
            response += 'ğŸ’¡ **ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„ØªØ§Ù„ÙŠØ©:**\n\n';
            response += 'â€¢ **Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª:** Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„Ø²ÙƒØ§Ø©ØŒ Ø§Ù„ØµÙŠØ§Ù…ØŒ ÙˆØ§Ù„Ø­Ø¬\n';
            response += 'â€¢ **Ø§Ù„Ø¹Ù‚ÙŠØ¯Ø©:** Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† ÙˆØ§Ù„Ø¥Ø³Ù„Ø§Ù…ØŒ Ø§Ù„ØªÙˆØ­ÙŠØ¯\n';
            response += 'â€¢ **Ø§Ù„Ù‚Ø±Ø¢Ù†:** ØªÙ„Ø§ÙˆØ© Ø¢ÙŠØ§Øª Ø£Ùˆ Ø³ÙˆØ± ÙƒØ§Ù…Ù„Ø©\n';
            response += 'â€¢ **Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«:** Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨ÙˆÙŠØ©\n\n';
            response += 'ğŸ“ **Ù†ØµÙŠØ­Ø©:** Ø­Ø§ÙˆÙ„ ØµÙŠØ§ØºØ© Ø³Ø¤Ø§Ù„Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙƒØ«Ø± ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ØŒ Ù…Ø«Ù„:\n';
            response += '- "Ù…Ø§ Ù‡ÙŠ Ø£Ø±ÙƒØ§Ù† Ø§Ù„ØµÙ„Ø§Ø©ØŸ"\n';
            response += '- "Ø§Ø¹Ø±Ø¶ Ù„ÙŠ Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ"\n';
            response += '- "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø­Ø¯ÙŠØ« Ø¹Ù† Ø§Ù„ØµØ¯Ù‚Ø©"\n';
            
            return response;
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ù„Ø¨ Ø¢ÙŠØ© ÙˆØ§Ø­Ø¯Ø©
        function isSingleAyahRequest(message) {
            const lowerMessage = message.toLowerCase().trim();
            
            const singleAyahIndicators = [
                'Ø¢ÙŠØ©', 'Ø§ÙŠØ©', 'Ø§Ù„Ø¢ÙŠØ©', 'Ø§Ù„Ø§ÙŠØ©',
                'Ø¢ÙŠØ© ÙˆØ§Ø­Ø¯Ø©', 'Ø¢ÙŠØ© Ø±Ù‚Ù…', 'Ø§Ù„Ø¢ÙŠØ© Ø±Ù‚Ù…',
                'Ø§Ø¹Ø±Ø¶ Ù„ÙŠ Ø§Ù„Ø¢ÙŠØ©', 'Ø§ÙƒØªØ¨ Ù„ÙŠ Ø§Ù„Ø¢ÙŠØ©'
            ];
            
            const surahIndicators = [
                'Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©', 'ÙƒÙ„ Ø§Ù„Ø³ÙˆØ±Ø©', 'Ø§Ù„Ø³ÙˆØ±Ø© ÙƒÙ„Ù‡Ø§',
                'Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø©', 'ÙƒØ§Ù…Ù„Ø©', 'ÙƒØ§Ù…Ù„Ù‡'
            ];
            
            const hasAyahIndicator = singleAyahIndicators.some(keyword => lowerMessage.includes(keyword));
            const hasSurahIndicator = surahIndicators.some(keyword => lowerMessage.includes(keyword));
            
            return hasAyahIndicator && !hasSurahIndicator;
        }
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¢ÙŠØ© ÙˆØ§Ø­Ø¯Ø©
        function findSingleAyah(message) {
            if (!quranData || quranData.length === 0) return null;
            
            const lowerMessage = message.toLowerCase().trim();
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ©
            const ayahMatch = lowerMessage.match(/(?:Ø¢ÙŠØ©|Ø§ÙŠØ©)[\s]*(?:Ø±Ù‚Ù…)?[\s]*(\d+)/);
            const ayahNumber = ayahMatch ? parseInt(ayahMatch[1]) : 1;
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³ÙˆØ±Ø©
            const surah = findSurahByName(message);
            if (!surah) return null;
            
            if (ayahNumber < 1 || ayahNumber > surah.total_verses) {
                return null;
            }
            
            const verse = surah.verses[ayahNumber - 1];
            if (!verse) return null;
            
            return {
                text: verse.text,
                number: ayahNumber,
                surahName: surah.name
            };
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ù„Ø¨ Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©
        function isCompleteSurahRequest(message) {
            const lowerMessage = message.toLowerCase().trim();
            
            const surahIndicators = [
                'Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©', 'Ø³ÙˆØ±Ù‡ ÙƒØ§Ù…Ù„Ù‡',
                'ÙƒÙ„ Ø§Ù„Ø³ÙˆØ±Ø©', 'Ø§Ù„Ø³ÙˆØ±Ø© ÙƒÙ„Ù‡Ø§',
                'Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø©', 'ÙƒØ§Ù…Ù„Ø©', 'ÙƒØ§Ù…Ù„Ù‡'
            ];
            
            return surahIndicators.some(keyword => lowerMessage.includes(keyword)) ||
                   (lowerMessage.includes('Ø³ÙˆØ±Ø©') && !lowerMessage.includes('Ø¢ÙŠØ©'));
        }
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©
        function findCompleteSurah(message) {
            return findSurahByName(message);
        }
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø© Ø¨Ø§Ù„Ø§Ø³Ù…
        function findSurahByName(message) {
            if (!quranData || quranData.length === 0) return null;
            
            const lowerMessage = message.toLowerCase().trim();
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø©
            const numberMatch = lowerMessage.match(/(\d+)/);
            if (numberMatch) {
                const surahNumber = parseInt(numberMatch[1]);
                if (surahNumber >= 1 && surahNumber <= 114) {
                    return quranData.find(s => s.id === surahNumber);
                }
            }
            
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³ÙˆØ±
            const surahNames = [
                'Ø§Ù„ÙØ§ØªØ­Ø©', 'Ø§Ù„Ø¨Ù‚Ø±Ø©', 'Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†', 'Ø§Ù„Ù†Ø³Ø§Ø¡', 'Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©',
                'Ø§Ù„Ø£Ù†Ø¹Ø§Ù…', 'Ø§Ù„Ø£Ø¹Ø±Ø§Ù', 'Ø§Ù„Ø£Ù†ÙØ§Ù„', 'Ø§Ù„ØªÙˆØ¨Ø©', 'ÙŠÙˆÙ†Ø³',
                'Ù‡ÙˆØ¯', 'ÙŠÙˆØ³Ù', 'Ø§Ù„Ø±Ø¹Ø¯', 'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…', 'Ø§Ù„Ø­Ø¬Ø±',
                'Ø§Ù„Ù†Ø­Ù„', 'Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡', 'Ø§Ù„ÙƒÙ‡Ù', 'Ù…Ø±ÙŠÙ…', 'Ø·Ù‡'
                // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
            ];
            
            for (const name of surahNames) {
                if (lowerMessage.includes(name.toLowerCase())) {
                    return quranData.find(s => s.name.includes(name));
                }
            }
            
            return null;
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø­Ø¯ÙŠØ«
        function isHadithQuestion(message) {
            const lowerMessage = message.toLowerCase();
            
            const hadithKeywords = [
                'Ø­Ø¯ÙŠØ«', 'Ø§Ù„Ø­Ø¯ÙŠØ«', 'Ø£Ø­Ø§Ø¯ÙŠØ«', 'Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«',
                'Ø§Ù„Ù†Ø¨ÙŠ', 'Ø§Ù„Ø±Ø³ÙˆÙ„', 'Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡',
                'Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ', 'Ù…Ø³Ù„Ù…', 'Ø§Ù„ØªØ±Ù…Ø°ÙŠ'
            ];
            
            return hadithKeywords.some(keyword => lowerMessage.includes(keyword));
        }
        
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«
        function searchHadith(message) {
            if (!isHadithLoaded || arabicHadiths.length === 0) return null;
            
            const lowerMessage = message.toLowerCase();
            
            // ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ù„Ù„Ø¨Ø­Ø«
            const searchKeywords = extractSearchKeywords(lowerMessage);
            
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«
            for (const hadith of arabicHadiths) {
                const hadithText = hadith.text.toLowerCase();
                const matchCount = searchKeywords.filter(kw => hadithText.includes(kw)).length;
                
                if (matchCount >= 1) {
                    return {
                        text: hadith.text,
                        source: 'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ'
                    };
                }
            }
            
            return null;
        }
        
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¨Ø­Ø«
        function extractSearchKeywords(message) {
            const stopWords = ['Ø¹Ù†', 'ÙÙŠ', 'Ù…Ù†', 'Ø¥Ù„Ù‰', 'Ø¹Ù„Ù‰', 'Ù…Ø§', 'Ù‡Ùˆ', 'Ù‡ÙŠ', 'Ø­Ø¯ÙŠØ«', 'Ø§Ù„Ø­Ø¯ÙŠØ«', 'Ø§Ø¨Ø­Ø«'];
            const words = message.split(/\s+/);
            
            return words.filter(word => 
                word.length > 2 && 
                !stopWords.includes(word)
            );
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ù…Ø´Ø§Ø¨Ù‡Ø©
        function getSimilarQuestions(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('ØµÙ„Ø§Ø©')) {
                return [
                    'Ù…Ø§ Ù‡ÙŠ Ø´Ø±ÙˆØ· Ø§Ù„ØµÙ„Ø§Ø©ØŸ',
                    'ÙƒÙ… Ø¹Ø¯Ø¯ Ø±ÙƒØ¹Ø§Øª ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±ØŸ',
                    'Ù…Ø§ Ù‡ÙŠ Ø³Ù†Ù† Ø§Ù„ØµÙ„Ø§Ø©ØŸ'
                ];
            } else if (lowerMessage.includes('Ø²ÙƒØ§Ø©')) {
                return [
                    'Ù…Ø§ Ù‡ÙŠ Ø´Ø±ÙˆØ· ÙˆØ¬ÙˆØ¨ Ø§Ù„Ø²ÙƒØ§Ø©ØŸ',
                    'ÙƒÙ… Ù†ØµØ§Ø¨ Ø²ÙƒØ§Ø© Ø§Ù„Ø°Ù‡Ø¨ØŸ',
                    'Ù…Ø§ Ù‡ÙŠ Ù…ØµØ§Ø±Ù Ø§Ù„Ø²ÙƒØ§Ø©ØŸ'
                ];
            } else if (lowerMessage.includes('ØµÙˆÙ…') || lowerMessage.includes('ØµÙŠØ§Ù…')) {
                return [
                    'Ù…Ø§ Ù‡ÙŠ Ù…Ø¨Ø·Ù„Ø§Øª Ø§Ù„ØµÙŠØ§Ù…ØŸ',
                    'Ù…Ø§ Ø­ÙƒÙ… ØµÙŠØ§Ù… ÙŠÙˆÙ… Ø¹Ø±ÙØ©ØŸ',
                    'Ù…Ø§ Ù‡ÙŠ Ø³Ù†Ù† Ø§Ù„ØµÙŠØ§Ù…ØŸ'
                ];
            } else if (lowerMessage.includes('Ø­Ø¬')) {
                return [
                    'Ù…Ø§ Ù‡ÙŠ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬ØŸ',
                    'Ù…Ø§ Ù‡ÙŠ ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ø­Ø¬ØŸ',
                    'Ù…Ø§ Ù‡ÙŠ Ø³Ù†Ù† Ø§Ù„Ø­Ø¬ØŸ'
                ];
            }
            
            return [
                'Ù…Ø§ Ù‡ÙŠ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ',
                'Ù…Ø§ Ø­ÙƒÙ… Ø§Ù„ØµÙ„Ø§Ø© ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ',
                'Ø§Ø¹Ø±Ø¶ Ù„ÙŠ Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©'
            ];
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        function addMessage(role, content, source = null, similarQuestions = null, saveToChat = true, isSingleAyah = false, isCompleteSurah = false, isHadith = false) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const roleText = role === 'user' ? 'ğŸ‘¤ Ø£Ù†Øª' : 'ğŸ¤– Ø§Ø³Ø£Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… AI';
            const iconClass = role === 'user' ? 'user-icon' : 'assistant-icon';
            
            let formattedContent = formatArabicText(content, isSingleAyah);
            
            let messageHTML = `
                <div class="message-header">
                    <div class="message-icon ${iconClass}">${role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–'}</div>
                    <div class="message-role">${roleText}</div>
                </div>
                <div class="message-content">
                    ${formattedContent}
            `;
            
            if (source) {
                messageHTML += `<div class="source-badge">ğŸ“š ${source}</div>`;
            }
            
            if (similarQuestions && similarQuestions.length > 0) {
                messageHTML += `
                    <div class="similar-questions">
                        <div class="similar-title">ğŸ’¡ Ø£Ø³Ø¦Ù„Ø© Ù…Ø´Ø§Ø¨Ù‡Ø©:</div>
                        ${similarQuestions.map(q => `
                            <button class="question-btn" onclick="askQuestion('${q.replace(/'/g, "\\'")}')">
                                ${q}
                            </button>
                        `).join('')}
                    </div>
                `;
            }
            
            messageHTML += '</div>';
            messageDiv.innerHTML = messageHTML;
            chatArea.appendChild(messageDiv);
            
            setTimeout(() => {
                chatArea.scrollTop = chatArea.scrollHeight;
            }, 100);
            
            if (saveToChat && currentChatId) {
                const chat = chats.find(c => c.id === currentChatId);
                if (chat) {
                    chat.messages.push({
                        role: role,
                        content: content,
                        source: source,
                        questions: similarQuestions,
                        isSingleAyah: isSingleAyah,
                        isCompleteSurah: isCompleteSurah,
                        isHadith: isHadith
                    });
                    saveChatsToStorage();
                    updateChatTitle(chat);
                }
            }
        }
        
        // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ
        function formatArabicText(text, isSingleAyah = false) {
            if (!text) return '';
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¥Ù„Ù‰ Ø¹Ø±Ø¨ÙŠØ©
            const arabicNumerals = ['Ù ', 'Ù¡', 'Ù¢', 'Ù£', 'Ù¤', 'Ù¥', 'Ù¦', 'Ù§', 'Ù¨', 'Ù©'];
            text = text.replace(/\d/g, (digit) => arabicNumerals[parseInt(digit)]);
            
            // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¢ÙŠØ§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©
            if (!isSingleAyah) {
                text = text.replace(/ï´¿([^ï´¾]+)ï´¾/g, '<span class="quran-verse">ï´¿$1ï´¾</span>');
            }
            
            // ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ±Ù‚ÙŠÙ…
            text = text.replace(/\s*ØŒ\s*/g, 'ØŒ ');
            text = text.replace(/\s*Ø›\s*/g, 'Ø› ');
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø·ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ <br>
            text = text.replace(/\n\n+/g, '<br><br>');
            text = text.replace(/\n/g, '<br>');
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø©
            text = text.replace(/\s{2,}/g, ' ');
            
            return text;
        }
        
        // Ø·Ø±Ø­ Ø³Ø¤Ø§Ù„ Ù…Ø¹ÙŠÙ†
        function askQuestion(question) {
            const userInput = document.getElementById('userInput');
            userInput.value = question;
            autoResize(userInput);
            sendMessage();
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…ÙØªØ§Ø­ Enter
        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }
        
        // ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 150) + 'px';
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function setupEventListeners() {
            const floatingToggle = document.getElementById('floatingToggle');
            floatingToggle.addEventListener('click', toggleSidebar);
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
        function handleResize() {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth > 768) {
                sidebar.classList.remove('active');
                sidebar.classList.remove('collapsed');
            }
        }
    </script>
</body>
</html>
